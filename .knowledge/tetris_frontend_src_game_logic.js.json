{"is_source_file": true, "format": "JavaScript", "description": "This file defines core game logic functions for a Tetris game, including board creation, piece manipulation (move, rotate, merge), collision detection, line clearing, and ghost piece calculation.", "external_files": ["./constants", "./pieces"], "external_methods": ["getPieceSpawnMatrix", "rotateMatrixCW", "rotateMatrixCCW", "getKickOffsets"], "published": ["createEmptyBoard", "matrixToCells", "collides", "mergePiece", "clearLines", "getSpawnPosition", "makeActivePiece", "tryMove", "tryRotate", "getGhostCells", "canPlace"], "classes": [], "methods": [{"name": "createEmptyBoard()", "description": "Creates an empty 20x10 game board filled with null values.", "scope": "", "scopeKind": ""}, {"name": "matrixToCells(matrix, x0, y0, type)", "description": "Converts a 4x4 piece matrix into a list of absolute occupied cell positions based on the piece's x/y coordinates.", "scope": "", "scopeKind": ""}, {"name": "collides(board, cells)", "description": "Checks if any cells are out of bounds or overlap existing occupied cells on the board.", "scope": "", "scopeKind": ""}, {"name": "mergePiece(board, cells)", "description": "Merges a piece's cells into a copy of the current board, returning the updated board.", "scope": "", "scopeKind": ""}, {"name": "clearLines(board)", "description": "Clears completed lines from the board, returning the new board state and the count of cleared lines.", "scope": "", "scopeKind": ""}, {"name": "getSpawnPosition(type)", "description": "Calculates initial spawn position for a given piece type, centered horizontally and slightly above the visible board.", "scope": "", "scopeKind": ""}, {"name": "makeActivePiece(type)", "description": "Creates a new active piece object at its spawn position with initial rotation and matrix.", "scope": "", "scopeKind": ""}, {"name": "tryMove(board, piece, dx, dy)", "description": "Attempts to move a piece by dx/dy; returns the moved piece if no collision, otherwise the original.", "scope": "", "scopeKind": ""}, {"name": "tryRotate(board, piece, dir)", "description": "Attempts to rotate a piece clockwise or counter-clockwise with SRS kicks; returns rotated piece if successful.", "scope": "", "scopeKind": ""}, {"name": "getGhostCells(board, piece)", "description": "Calculates the landing position (ghost) cells for the current active piece.", "scope": "", "scopeKind": ""}, {"name": "canPlace(board, piece)", "description": "Checks if the current position of a piece is valid (no collision).", "scope": "", "scopeKind": ""}], "calls": ["collides", "matrixToCells", "rotateMatrixCW", "rotateMatrixCCW", "getKickOffsets", "tryMove"], "search-terms": ["game logic", "Tetris board", "piece manipulation", "collision detection", "line clearing", "ghost piece", "rotation", "srs", "spawn position"], "state": 2, "file_id": 25, "knowledge_revision": 57, "git_revision": "41bc4bf9d6988e9268ec4c185f8ddfe9ce333149", "ctags": [{"_type": "tag", "name": "canPlace", "path": "/home/kavia/workspace/code-generation/browser-tetris-196103-196119/tetris_frontend/src/game/logic.js", "pattern": "/^export function canPlace(board, piece) {$/", "language": "JavaScript", "kind": "function", "signature": "(board, piece)"}, {"_type": "tag", "name": "clearLines", "path": "/home/kavia/workspace/code-generation/browser-tetris-196103-196119/tetris_frontend/src/game/logic.js", "pattern": "/^export function clearLines(board) {$/", "language": "JavaScript", "kind": "function", "signature": "(board)"}, {"_type": "tag", "name": "collides", "path": "/home/kavia/workspace/code-generation/browser-tetris-196103-196119/tetris_frontend/src/game/logic.js", "pattern": "/^export function collides(board, cells) {$/", "language": "JavaScript", "kind": "function", "signature": "(board, cells)"}, {"_type": "tag", "name": "createEmptyBoard", "path": "/home/kavia/workspace/code-generation/browser-tetris-196103-196119/tetris_frontend/src/game/logic.js", "pattern": "/^export function createEmptyBoard() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getGhostCells", "path": "/home/kavia/workspace/code-generation/browser-tetris-196103-196119/tetris_frontend/src/game/logic.js", "pattern": "/^export function getGhostCells(board, piece) {$/", "language": "JavaScript", "kind": "function", "signature": "(board, piece)"}, {"_type": "tag", "name": "getSpawnPosition", "path": "/home/kavia/workspace/code-generation/browser-tetris-196103-196119/tetris_frontend/src/game/logic.js", "pattern": "/^export function getSpawnPosition(type) {$/", "language": "JavaScript", "kind": "function", "signature": "(type)"}, {"_type": "tag", "name": "makeActivePiece", "path": "/home/kavia/workspace/code-generation/browser-tetris-196103-196119/tetris_frontend/src/game/logic.js", "pattern": "/^export function makeActivePiece(type) {$/", "language": "JavaScript", "kind": "function", "signature": "(type)"}, {"_type": "tag", "name": "matrixToCells", "path": "/home/kavia/workspace/code-generation/browser-tetris-196103-196119/tetris_frontend/src/game/logic.js", "pattern": "/^export function matrixToCells(matrix, x0, y0, type) {$/", "language": "JavaScript", "kind": "function", "signature": "(matrix, x0, y0, type)"}, {"_type": "tag", "name": "mergePiece", "path": "/home/kavia/workspace/code-generation/browser-tetris-196103-196119/tetris_frontend/src/game/logic.js", "pattern": "/^export function mergePiece(board, cells) {$/", "language": "JavaScript", "kind": "function", "signature": "(board, cells)"}, {"_type": "tag", "name": "tryMove", "path": "/home/kavia/workspace/code-generation/browser-tetris-196103-196119/tetris_frontend/src/game/logic.js", "pattern": "/^export function tryMove(board, piece, dx, dy) {$/", "language": "JavaScript", "kind": "function", "signature": "(board, piece, dx, dy)"}, {"_type": "tag", "name": "tryRotate", "path": "/home/kavia/workspace/code-generation/browser-tetris-196103-196119/tetris_frontend/src/game/logic.js", "pattern": "/^export function tryRotate(board, piece, dir) {$/", "language": "JavaScript", "kind": "function", "signature": "(board, piece, dir)"}], "hash": "3df9869e5311353734465b9559240d24", "format-version": 4, "code-base-name": "tetris_frontend", "filename": "tetris_frontend/src/game/logic.js", "revision_history": [{"57": "41bc4bf9d6988e9268ec4c185f8ddfe9ce333149"}]}